@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  margin: 0 !important;
  padding: 0 !important;
  width: 100% !important;
  /* ใช้ความสูงแบบ Dynamic Viewport Height */
  height: 100vh !important;
  height: 100dvh !important;
  max-height: 100vh !important;
  max-height: 100dvh !important;
  overflow-x: hidden !important;
  overflow-y: hidden !important;
  /* สำคัญ: ป้องกันการดึงหน้าจอลง (Pull-to-refresh) ที่จะเผยให้เห็น Address bar */
  overscroll-behavior-y: none !important;
  overscroll-behavior: none !important;
  -webkit-tap-highlight-color: transparent !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

body {
  margin: 0 !important;
  padding: 0 !important;
  width: 100% !important;
  /* ใช้ความสูงแบบ Dynamic Viewport Height */
  height: 100vh !important;
  height: 100dvh !important;
  max-height: 100vh !important;
  max-height: 100dvh !important;
  overflow-x: hidden !important;
  overflow-y: hidden !important;
  /* สำคัญ: ป้องกันการดึงหน้าจอลง (Pull-to-refresh) ที่จะเผยให้เห็น Address bar */
  overscroll-behavior-y: none !important;
  overscroll-behavior: none !important;
  font-family: 'Sarabun', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: #f9fafb; /* bg-gray-50 */
  -webkit-tap-highlight-color: transparent !important;
  /* Prevent text size adjustment on iOS */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  /* Smooth scrolling */
  -webkit-overflow-scrolling: touch;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

#root {
  width: 100% !important;
  height: 100vh !important;
  height: 100dvh !important; /* Dynamic Viewport Height - supports mobile browsers */
  max-height: 100vh !important;
  max-height: 100dvh !important;
  overflow-x: hidden !important;
  overflow-y: auto !important;
  /* Fullscreen support */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Utility class for full viewport height (like example) */
.h-dvh {
  height: 100vh;
  height: 100dvh;
}

/* Safe Area for Mobile - iOS Notch & Status Bar */
.pt-safe {
  padding-top: max(env(safe-area-inset-top, 0px), 8px);
}

.pb-safe {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.pl-safe {
  padding-left: env(safe-area-inset-left, 0px);
}

.pr-safe {
  padding-right: env(safe-area-inset-right, 0px);
}

/* Header Safe Area Support - ป้องกันทับ Status Bar */
header {
  top: calc(env(safe-area-inset-top, 0px) + 8px) !important;
  padding-top: 8px !important;
  left: 0 !important;
  right: 0 !important;
  position: fixed !important;
}

/* Main content spacing for fixed header */
main {
  margin-top: calc(env(safe-area-inset-top, 0px) + 136px) !important;
}

/* Fullscreen support for mobile - Based on working example */
@media (max-width: 768px) {
  html {
    width: 100% !important;
    /* ใช้ความสูงแบบ Dynamic Viewport Height */
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
    /* ป้องกันการดึงหน้าจอลง (Pull-to-refresh) */
    overscroll-behavior-y: none !important;
    overscroll-behavior: none !important;
    -webkit-tap-highlight-color: transparent !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  body {
    width: 100% !important;
    /* ใช้ความสูงแบบ Dynamic Viewport Height */
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow-x: hidden !important;
    overflow-y: hidden !important;
    /* ป้องกันการดึงหน้าจอลง (Pull-to-refresh) */
    overscroll-behavior-y: none !important;
    overscroll-behavior: none !important;
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
    margin: 0 !important;
    padding: 0 !important;
    -webkit-tap-highlight-color: transparent !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
  }
  
  #root {
    width: 100% !important;
    height: 100vh !important;
    height: 100dvh !important;
    max-height: 100vh !important;
    max-height: 100dvh !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    position: relative !important;
    display: block !important;
    visibility: visible !important;
  }
  
  /* ป้องกันการเลื่อนเมื่อ focus input (iOS Safari) */
  input:focus,
  textarea:focus,
  select:focus {
    scroll-margin-top: 0 !important;
    scroll-margin-bottom: 0 !important;
    /* ป้องกันการเลื่อนหน้าจอ */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  /* Standalone mode - Force fullscreen (PWA mode) */
  @media (display-mode: standalone) {
    html {
      height: 100vh !important;
      height: 100dvh !important;
      overflow: hidden !important;
      position: fixed !important;
      width: 100% !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
    }
    
    body {
      height: 100vh !important;
      height: 100dvh !important;
      overflow: hidden !important;
      position: fixed !important;
      width: 100% !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
    
    #root {
      height: 100vh !important;
      height: 100dvh !important;
      overflow-y: auto !important;
      overflow-x: hidden !important;
      position: relative !important;
      width: 100% !important;
      -webkit-overflow-scrolling: touch !important;
    }
  }
  
  /* iOS Safari standalone mode detection */
  @supports (-webkit-touch-callout: none) {
    /* This is iOS */
    html.standalone-mode,
    body.standalone-mode {
      height: 100vh !important;
      height: 100dvh !important;
      overflow: hidden !important;
      position: fixed !important;
      width: 100% !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
    }
    
    html.standalone-mode #root,
    body.standalone-mode #root {
      height: 100vh !important;
      height: 100dvh !important;
      overflow-y: auto !important;
      position: relative !important;
      width: 100% !important;
      -webkit-overflow-scrolling: touch !important;
    }
  }
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

.mobile-input {
  font-size: 16px;
  padding-top: 12px;
  padding-bottom: 12px;
}

@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }
}

@media (min-width: 769px) {
  .mobile-only {
    display: none !important;
  }
}

